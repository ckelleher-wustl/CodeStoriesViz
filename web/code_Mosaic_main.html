<div class='horizContainer'>
	<div class='leftContainer' id='region0' line='from PIL import Image'>
		<pre class='code'>
from PIL import Image
import numpy as np
import os
from scipy.spatial import KDTree
import random
from sklearn.cluster import KMeans
import pandas as pd
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: attempt to read image using imageio')">attempt to read image using imageio</button>
			<div class='tooltip'>
				<div class='history-header'>attempt to read image using imageio</div>
				<pre class='code'><span style='background-color:yellow'>from PIL import Image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Calculate Average Pixel with Numpy average to compare runtime')">Calculate Average Pixel with Numpy average to compare runtime</button>
			<div class='tooltip'>
				<div class='history-header'>Calculate Average Pixel with Numpy average to compare runtime</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:yellow'>import numpy as np</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through photos in directory, calculate average pixel of each')">Loop through photos in directory, calculate average pixel of each</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through photos in directory, calculate average pixel of each</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:yellow'>import os</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:yellow'>from scipy.spatial import KDTree</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Now that something is working, investigate other ways of compiling mosaic to compare')">Now that something is working, investigate other ways of compiling mosaic to compare
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match ')">Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match </button>
			<div class='tooltip'>
				<div class='history-header'>Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match </div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:white'>from scipy.spatial import KDTree</span>
<span style='background-color:yellow'>import random</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans to cluster pixels in an image into groups of colors')">Use Kmeans to cluster pixels in an image into groups of colors
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Print out pixel values for an image to investigate how to cluster the data using Kmeans')">Print out pixel values for an image to investigate how to cluster the data using Kmeans</button>
			<div class='tooltip'>
				<div class='history-header'>Print out pixel values for an image to investigate how to cluster the data using Kmeans</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:white'>from scipy.spatial import KDTree</span>
<span style='background-color:white'>import random</span>
<span style='background-color:yellow'>from sklearn.cluster import KMeans</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each')">Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</button>
			<div class='tooltip'>
				<div class='history-header'>Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:white'>from scipy.spatial import KDTree</span>
<span style='background-color:white'>import random</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters')">Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</button>
			<div class='tooltip'>
				<div class='history-header'>Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:white'>from scipy.spatial import KDTree</span>
<span style='background-color:white'>import random</span>
<span style='background-color:yellow'>import pandas as pd</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>from PIL import Image</span>
<span style='background-color:white'>import numpy as np</span>
<span style='background-color:white'>import os</span>
<span style='background-color:white'>from scipy.spatial import KDTree</span>
<span style='background-color:white'>import random</span>
<span style='background-color:white'>from sklearn.cluster import KMeans</span>
<span style='background-color:white'>import pandas as pd</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region1' line='def get_avg_pixel(img):'>
		<pre class='code'>
def get_avg_pixel(img):
     '''
     Parameters: img (PIL Image object)
     returns: average pixel (RGB tuple)
     '''
     resized_image = img.resize((1,1), Image.Resampling.LANCZOS)
     pixels = resized_image.load()
     return pixels[0,0]
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through photos in directory, calculate average pixel of each')">Loop through photos in directory, calculate average pixel of each</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through photos in directory, calculate average pixel of each</div>
				<pre class='code'><span style='background-color:yellow'>def get_avg_pixel(img):</span>
<span style='background-color:yellow'>pixels = resized_image.load()</span>
<span style='background-color:yellow'>return pixels[0,0]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:white'>def get_avg_pixel(img):</span>
<span style='background-color:white'>pixels = resized_image.load()</span>
<span style='background-color:white'>return pixels[0,0]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_avg_pixel(img):</span>
<span style='background-color:yellow'>Parameters: img (PIL Image object)</span>
<span style='background-color:yellow'>returns: average pixel (RGB tuple)</span>
<span style='background-color:white'>pixels = resized_image.load()</span>
<span style='background-color:white'>return pixels[0,0]</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>def get_avg_pixel(img):</span>
<span style='background-color:white'>Parameters: img (PIL Image object)</span>
<span style='background-color:white'>returns: average pixel (RGB tuple)</span>
<span style='background-color:yellow'>resized_image = img.resize((1,1), Image.Resampling.LANCZOS)</span>
<span style='background-color:white'>pixels = resized_image.load()</span>
<span style='background-color:white'>return pixels[0,0]</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region2' line='def get_file_avgPixelMap(file_image_map):'>
		<pre class='code'>
def get_file_avgPixelMap(file_image_map):
    '''
     Parameters:
        file_image_map : (dictionary mapping filenames to their respective PIL Image objects)
     Returns: 
        dictionary mapping filenames to their average calculated pixel value (RGB tuple)
     '''
    file_avgPixel_map = {}
    for file in file_image_map.keys():
        img = file_image_map[file]
        try:
             pixel = get_avg_pixel(img)
             file_avgPixel_map[file] = pixel
        except:
             print("ERROR", file)
    return file_avgPixel_map
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Dump pre-calculated average pixels to disk to test usage speed')">Dump pre-calculated average pixels to disk to test usage speed</button>
			<div class='tooltip'>
				<div class='history-header'>Dump pre-calculated average pixels to disk to test usage speed</div>
				<pre class='code'><span style='background-color:yellow'>pixel = get_avg_pixel(img)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Functionalize get_file_avgPixelMap() to make code neater')">Functionalize get_file_avgPixelMap() to make code neater</button>
			<div class='tooltip'>
				<div class='history-header'>Functionalize get_file_avgPixelMap() to make code neater</div>
				<pre class='code'><span style='background-color:yellow'>def get_file_avgPixelMap(file_image_map):</span>
<span style='background-color:yellow'>file_avgPixel_map = {}</span>
<span style='background-color:yellow'>for file in file_image_map.keys():</span>
<span style='background-color:yellow'>img = file_image_map[file]</span>
<span style='background-color:white'>pixel = get_avg_pixel(img)</span>
<span style='background-color:yellow'>file_avgPixel_map[file] = pixel</span>
<span style='background-color:yellow'>print("ERROR", file)</span>
<span style='background-color:yellow'>return file_avgPixel_map</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_file_avgPixelMap(file_image_map):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>file_image_map : (dictionary mapping filenames to their respective PIL Image objects)</span>
<span style='background-color:yellow'>dictionary mapping filenames to their average calculated pixel value (RGB tuple)</span>
<span style='background-color:white'>file_avgPixel_map = {}</span>
<span style='background-color:white'>for file in file_image_map.keys():</span>
<span style='background-color:white'>img = file_image_map[file]</span>
<span style='background-color:white'>pixel = get_avg_pixel(img)</span>
<span style='background-color:white'>file_avgPixel_map[file] = pixel</span>
<span style='background-color:white'>print("ERROR", file)</span>
<span style='background-color:white'>return file_avgPixel_map</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region3' line='def get_file_image_map(photos_dir, width=50):'>
		<pre class='code'>
def get_file_image_map(photos_dir, width=50):
    '''
    Parameters:
        photos_dir : name of directory with photos to make mosaic in it (string)
        width: width in pixels to downscale images to for faster processing and uniform shape (int)
    Returns:
        dictionary mapping filenames to their respective PIL images
    '''
    height = width #square image
    file_image_map = {}
    for filename in os.listdir(photos_dir):
        if filename.endswith(".jpg"):
            img = Image.open(photos_dir+filename)
            img.draft("RGB",(width,height))
            img = img.resize((width, height), Image.Resampling.LANCZOS)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through photos in directory, calculate average pixel of each')">Loop through photos in directory, calculate average pixel of each</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through photos in directory, calculate average pixel of each</div>
				<pre class='code'><span style='background-color:yellow'>for filename in os.listdir(photos_dir):</span>
<span style='background-color:yellow'>if filename.endswith(".jpg"):</span>
<span style='background-color:yellow'>img = Image.open(photos_dir+filename)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create mapping from filename to image object so images aren\'t read in more than once')">Create mapping from filename to image object so images aren't read in more than once</button>
			<div class='tooltip'>
				<div class='history-header'>Create mapping from filename to image object so images aren't read in more than once</div>
				<pre class='code'><span style='background-color:yellow'>file_image_map = {}</span>
<span style='background-color:white'>for filename in os.listdir(photos_dir):</span>
<span style='background-color:white'>if filename.endswith(".jpg"):</span>
<span style='background-color:white'>img = Image.open(photos_dir+filename)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:white'>file_image_map = {}</span>
<span style='background-color:white'>for filename in os.listdir(photos_dir):</span>
<span style='background-color:white'>if filename.endswith(".jpg"):</span>
<span style='background-color:white'>img = Image.open(photos_dir+filename)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>def get_file_image_map(photos_dir, width=50):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>photos_dir : name of directory with photos to make mosaic in it (string)</span>
<span style='background-color:yellow'>width: width in pixels to downscale images to for faster processing and uniform shape (int)</span>
<span style='background-color:yellow'>dictionary mapping filenames to their respective PIL images</span>
<span style='background-color:yellow'>height = width #square image</span>
<span style='background-color:white'>file_image_map = {}</span>
<span style='background-color:white'>for filename in os.listdir(photos_dir):</span>
<span style='background-color:white'>if filename.endswith(".jpg"):</span>
<span style='background-color:white'>img = Image.open(photos_dir+filename)</span>
<span style='background-color:yellow'>img.draft("RGB",(width,height))</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>def get_file_image_map(photos_dir, width=50):</span>
<span style='background-color:white'>Parameters:</span>
<span style='background-color:white'>photos_dir : name of directory with photos to make mosaic in it (string)</span>
<span style='background-color:white'>width: width in pixels to downscale images to for faster processing and uniform shape (int)</span>
<span style='background-color:white'>dictionary mapping filenames to their respective PIL images</span>
<span style='background-color:white'>height = width #square image</span>
<span style='background-color:white'>file_image_map = {}</span>
<span style='background-color:white'>for filename in os.listdir(photos_dir):</span>
<span style='background-color:white'>if filename.endswith(".jpg"):</span>
<span style='background-color:white'>img = Image.open(photos_dir+filename)</span>
<span style='background-color:white'>img.draft("RGB",(width,height))</span>
<span style='background-color:yellow'>img = img.resize((width, height), Image.Resampling.LANCZOS)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region4' line='            file_image_map[filename] = img'>
		<pre class='code'>
            file_image_map[filename] = img
    return file_image_map
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create mapping from filename to image object so images aren\'t read in more than once')">Create mapping from filename to image object so images aren't read in more than once</button>
			<div class='tooltip'>
				<div class='history-header'>Create mapping from filename to image object so images aren't read in more than once</div>
				<pre class='code'><span style='background-color:yellow'>file_image_map[filename] = img</span>
<span style='background-color:yellow'>return file_image_map</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region5' line='def get_concat_h(im1, im2):'>
		<pre class='code'>
def get_concat_h(im1, im2):
    '''
    Parameters: 
        im1: PIL image
        im2: PIL image
    Returns:
        PIL image of im1 and im2 being concatenated together horizontally, im1 on left side of im2
    '''
    dst = Image.new('RGB', (im1.width + im2.width, im1.height))
    dst.paste(im1, (0, 0))
    dst.paste(im2, (im1.width, 0))
    return dst
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add functions to concat images horizontally and vertically')">Add functions to concat images horizontally and vertically</button>
			<div class='tooltip'>
				<div class='history-header'>Add functions to concat images horizontally and vertically</div>
				<pre class='code'><span style='background-color:yellow'>def get_concat_h(im1, im2):</span>
<span style='background-color:yellow'>dst = Image.new('RGB', (im1.width + im2.width, im1.height))</span>
<span style='background-color:yellow'>dst.paste(im1, (0, 0))</span>
<span style='background-color:yellow'>dst.paste(im2, (im1.width, 0))</span>
<span style='background-color:yellow'>return dst</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_concat_h(im1, im2):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>im1: PIL image</span>
<span style='background-color:yellow'>im2: PIL image</span>
<span style='background-color:yellow'>PIL image of im1 and im2 being concatenated together horizontally, im1 on left side of im2</span>
<span style='background-color:white'>dst = Image.new('RGB', (im1.width + im2.width, im1.height))</span>
<span style='background-color:white'>dst.paste(im1, (0, 0))</span>
<span style='background-color:white'>dst.paste(im2, (im1.width, 0))</span>
<span style='background-color:white'>return dst</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region6' line='def get_concat_v(im1, im2):'>
		<pre class='code'>
def get_concat_v(im1, im2):
    '''
    Parameters: 
        im1: PIL image
        im2: PIL image
    Returns:
        PIL image of im1 and im2 being concatenated together vertically, im1 above im2
    '''
    dst = Image.new('RGB', (im1.width, im1.height + im2.height))
    dst.paste(im1, (0, 0))
    dst.paste(im2, (0, im1.height))
    return dst
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add functions to concat images horizontally and vertically')">Add functions to concat images horizontally and vertically</button>
			<div class='tooltip'>
				<div class='history-header'>Add functions to concat images horizontally and vertically</div>
				<pre class='code'><span style='background-color:yellow'>def get_concat_v(im1, im2):</span>
<span style='background-color:yellow'>dst = Image.new('RGB', (im1.width, im1.height + im2.height))</span>
<span style='background-color:yellow'>dst.paste(im1, (0, 0))</span>
<span style='background-color:yellow'>dst.paste(im2, (0, im1.height))</span>
<span style='background-color:yellow'>return dst</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_concat_v(im1, im2):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>im1: PIL image</span>
<span style='background-color:yellow'>im2: PIL image</span>
<span style='background-color:yellow'>PIL image of im1 and im2 being concatenated together vertically, im1 above im2</span>
<span style='background-color:white'>dst = Image.new('RGB', (im1.width, im1.height + im2.height))</span>
<span style='background-color:white'>dst.paste(im1, (0, 0))</span>
<span style='background-color:white'>dst.paste(im2, (0, im1.height))</span>
<span style='background-color:white'>return dst</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region7' line='def get_pixel_files_map(pixel_map):'>
		<pre class='code'>
def get_pixel_files_map(pixel_map):
    '''
    Parameters:
        pixel_map : dictionary mapping filename to average pixel
    Returns:
        dictionary mapping average pixel to a list of filenames with that pixel average
    '''
    pixel_files_map = {}
    #create map from pixel value to list of files with that avg pixel
    for filename in pixel_map.keys():
        avg_pixel_value = pixel_map[filename]
        if avg_pixel_value in pixel_files_map.keys():
            pixel_files_map[avg_pixel_value].append(filename)
        else:
            pixel_files_map[avg_pixel_value] = [filename]
    return pixel_files_map
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Map average pixel values back to their respective filenames')">Map average pixel values back to their respective filenames</button>
			<div class='tooltip'>
				<div class='history-header'>Map average pixel values back to their respective filenames</div>
				<pre class='code'><span style='background-color:yellow'>for filename in pixel_map.keys():</span>
<span style='background-color:yellow'>avg_pixel_value = pixel_map[filename]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:yellow'>#create map from pixel value to list of files with that avg pixel</span>
<span style='background-color:white'>for filename in pixel_map.keys():</span>
<span style='background-color:white'>avg_pixel_value = pixel_map[filename]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>def get_pixel_files_map(pixel_map):</span>
<span style='background-color:yellow'>pixel_files_map = {}</span>
<span style='background-color:white'>#create map from pixel value to list of files with that avg pixel</span>
<span style='background-color:white'>for filename in pixel_map.keys():</span>
<span style='background-color:white'>avg_pixel_value = pixel_map[filename]</span>
<span style='background-color:yellow'>if avg_pixel_value in pixel_files_map.keys():</span>
<span style='background-color:yellow'>pixel_files_map[avg_pixel_value].append(filename)</span>
<span style='background-color:white'>pixel_files_map[avg_pixel_value].append(filename)</span>
<span style='background-color:yellow'>return pixel_files_map</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_pixel_files_map(pixel_map):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>pixel_map : dictionary mapping filename to average pixel</span>
<span style='background-color:yellow'>dictionary mapping average pixel to a list of filenames with that pixel average</span>
<span style='background-color:white'>pixel_files_map = {}</span>
<span style='background-color:white'>#create map from pixel value to list of files with that avg pixel</span>
<span style='background-color:white'>for filename in pixel_map.keys():</span>
<span style='background-color:white'>avg_pixel_value = pixel_map[filename]</span>
<span style='background-color:white'>if avg_pixel_value in pixel_files_map.keys():</span>
<span style='background-color:white'>pixel_files_map[avg_pixel_value].append(filename)</span>
<span style='background-color:white'>pixel_files_map[avg_pixel_value].append(filename)</span>
<span style='background-color:white'>return pixel_files_map</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region8' line='def get_all_avg_pixels_array(file_image_map):'>
		<pre class='code'>
def get_all_avg_pixels_array(file_image_map):
    '''
    Parameters:
        file_image_map: dictionary mapping filenames to PIL images
    Returns:
        array of all pixel values
    '''
    all_avg_pixels = []
    for filename in file_image_map.keys():
        all_avg_pixels.append(file_image_map[filename])
    return all_avg_pixels
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>def get_all_avg_pixels_array(file_image_map):</span>
<span style='background-color:yellow'>all_avg_pixels = []</span>
<span style='background-color:yellow'>for filename in file_image_map.keys():</span>
<span style='background-color:yellow'>all_avg_pixels.append(file_image_map[filename])</span>
<span style='background-color:yellow'>return all_avg_pixels</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_all_avg_pixels_array(file_image_map):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>file_image_map: dictionary mapping filenames to PIL images</span>
<span style='background-color:yellow'>array of all pixel values</span>
<span style='background-color:white'>all_avg_pixels = []</span>
<span style='background-color:white'>for filename in file_image_map.keys():</span>
<span style='background-color:white'>all_avg_pixels.append(file_image_map[filename])</span>
<span style='background-color:white'>return all_avg_pixels</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region9' line='def scale_image_to_basewidth(img, basewidth=50):'>
		<pre class='code'>
def scale_image_to_basewidth(img, basewidth=50):
    '''
    Parameters:
        img: PIL Image
        basewidth: int
    Returns:
        PIL Image rescaled proportionally such that its new base = basewidth
    '''
    wpercent = (basewidth / float(img.size[0]))
    hsize = int((float(img.size[1]) * float(wpercent)))
    img = img.resize((basewidth, hsize), Image.Resampling.LANCZOS)
    return img
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Switch to PIL (Python Image Library) and read in an image')">Switch to PIL (Python Image Library) and read in an image</button>
			<div class='tooltip'>
				<div class='history-header'>Switch to PIL (Python Image Library) and read in an image</div>
				<pre class='code'><span style='background-color:yellow'>wpercent = (basewidth / float(img.size[0]))</span>
<span style='background-color:yellow'>hsize = int((float(img.size[1]) * float(wpercent)))</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:white'>wpercent = (basewidth / float(img.size[0]))</span>
<span style='background-color:white'>hsize = int((float(img.size[1]) * float(wpercent)))</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>def scale_image_to_basewidth(img, basewidth=50):</span>
<span style='background-color:white'>wpercent = (basewidth / float(img.size[0]))</span>
<span style='background-color:white'>hsize = int((float(img.size[1]) * float(wpercent)))</span>
<span style='background-color:yellow'>return img</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def scale_image_to_basewidth(img, basewidth=50):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>img: PIL Image</span>
<span style='background-color:yellow'>basewidth: int</span>
<span style='background-color:yellow'>PIL Image rescaled proportionally such that its new base = basewidth</span>
<span style='background-color:white'>wpercent = (basewidth / float(img.size[0]))</span>
<span style='background-color:white'>hsize = int((float(img.size[1]) * float(wpercent)))</span>
<span style='background-color:white'>return img</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>def scale_image_to_basewidth(img, basewidth=50):</span>
<span style='background-color:white'>Parameters:</span>
<span style='background-color:white'>img: PIL Image</span>
<span style='background-color:white'>basewidth: int</span>
<span style='background-color:white'>PIL Image rescaled proportionally such that its new base = basewidth</span>
<span style='background-color:white'>wpercent = (basewidth / float(img.size[0]))</span>
<span style='background-color:white'>hsize = int((float(img.size[1]) * float(wpercent)))</span>
<span style='background-color:yellow'>img = img.resize((basewidth, hsize), Image.Resampling.LANCZOS)</span>
<span style='background-color:white'>return img</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region10' line='def get_kmeans_dataframe_all_photos(file_image_map):'>
		<pre class='code'>
def get_kmeans_dataframe_all_photos(file_image_map):
    '''
    This function performs a kmeans cluster on each image, clustering the array of pixels to identify dominant colors.
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file')">Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</button>
			<div class='tooltip'>
				<div class='history-header'>Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</div>
				<pre class='code'><span style='background-color:yellow'>def get_kmeans_dataframe_all_photos(file_image_map):</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_kmeans_dataframe_all_photos(file_image_map):</span>
<span style='background-color:yellow'>This function performs a kmeans cluster on each image, clustering the array of pixels to identify dominant colors.</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region11' line='    Parameters:'>
		<pre class='code'>
    Parameters:
        file_image_map: dictionary mapping filename to respective PIL Image
    Returns:
        Pandas Dataframe linking together:
            filename (string)
            each color cluster centroid (RGB tuple)
            estimated percent of the image falls into that color cluster (float)
    '''
    all_rows = []
    table_columns = ["filename","centroid","percent"]
    for file in file_image_map.keys():
        img = file_image_map[file]
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Functionalize get_file_avgPixelMap() to make code neater')">Functionalize get_file_avgPixelMap() to make code neater</button>
			<div class='tooltip'>
				<div class='history-header'>Functionalize get_file_avgPixelMap() to make code neater</div>
				<pre class='code'><span style='background-color:yellow'>for file in file_image_map.keys():</span>
<span style='background-color:yellow'>img = file_image_map[file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters')">Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</button>
			<div class='tooltip'>
				<div class='history-header'>Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</div>
				<pre class='code'><span style='background-color:yellow'>all_rows = []</span>
<span style='background-color:yellow'>table_columns = ["filename","centroid","percent"]</span>
<span style='background-color:white'>for file in file_image_map.keys():</span>
<span style='background-color:white'>img = file_image_map[file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>file_image_map: dictionary mapping filename to respective PIL Image</span>
<span style='background-color:yellow'>Pandas Dataframe linking together:</span>
<span style='background-color:yellow'>filename (string)</span>
<span style='background-color:yellow'>each color cluster centroid (RGB tuple)</span>
<span style='background-color:yellow'>estimated percent of the image falls into that color cluster (float)</span>
<span style='background-color:white'>all_rows = []</span>
<span style='background-color:white'>table_columns = ["filename","centroid","percent"]</span>
<span style='background-color:white'>for file in file_image_map.keys():</span>
<span style='background-color:white'>img = file_image_map[file]</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region12' line='        pixels = np.array(img.getdata())'>
		<pre class='code'>
        pixels = np.array(img.getdata())
        kmeans = KMeans(n_clusters=4).fit(pixels)
        centroids = kmeans.cluster_centers_.astype(int)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans to cluster pixels in an image into groups of colors')">Use Kmeans to cluster pixels in an image into groups of colors
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each')">Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</button>
			<div class='tooltip'>
				<div class='history-header'>Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</div>
				<pre class='code'><span style='background-color:yellow'>pixels = np.array(img.getdata())</span>
<span style='background-color:yellow'>kmeans = KMeans(n_clusters=4).fit(pixels)</span>
<span style='background-color:yellow'>centroids = kmeans.cluster_centers_.astype(int)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region13' line='        predictions = kmeans.predict(pixels)'>
		<pre class='code'>
        predictions = kmeans.predict(pixels)
        centroid_indexes, counts = np.unique(predictions, return_counts = True)
        percentages = counts / counts.sum()
        for percent, centroid in zip(percentages, centroids):
            all_rows.append([file, tuple(centroid), percent])
    return pd.DataFrame(all_rows, columns=table_columns)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans to cluster pixels in an image into groups of colors')">Use Kmeans to cluster pixels in an image into groups of colors
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each')">Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</button>
			<div class='tooltip'>
				<div class='history-header'>Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</div>
				<pre class='code'><span style='background-color:yellow'>predictions = kmeans.predict(pixels)</span>
<span style='background-color:yellow'>centroid_indexes, counts = np.unique(predictions, return_counts = True)</span>
<span style='background-color:yellow'>percentages = counts / counts.sum()</span>
<span style='background-color:yellow'>for percent, centroid in zip(percentages, centroids):</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters')">Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</button>
			<div class='tooltip'>
				<div class='history-header'>Create a pandas dataframe for one image that includes a list of all pixel colors and their respective clusters</div>
				<pre class='code'><span style='background-color:white'>predictions = kmeans.predict(pixels)</span>
<span style='background-color:white'>centroid_indexes, counts = np.unique(predictions, return_counts = True)</span>
<span style='background-color:white'>percentages = counts / counts.sum()</span>
<span style='background-color:white'>for percent, centroid in zip(percentages, centroids):</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file')">Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</button>
			<div class='tooltip'>
				<div class='history-header'>Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</div>
				<pre class='code'><span style='background-color:white'>predictions = kmeans.predict(pixels)</span>
<span style='background-color:white'>centroid_indexes, counts = np.unique(predictions, return_counts = True)</span>
<span style='background-color:white'>percentages = counts / counts.sum()</span>
<span style='background-color:white'>for percent, centroid in zip(percentages, centroids):</span>
<span style='background-color:yellow'>all_rows.append([file, tuple(centroid), percent])</span>
<span style='background-color:yellow'>return pd.DataFrame(all_rows, columns=table_columns)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region14' line='def string_to_tuple(s):'>
		<pre class='code'>
def string_to_tuple(s):
    '''
    Parameters: 
        s : string in format "(a, b, c)" where a, b, and c are RGB values
    Returns:
        RGB tuple in format (R, G, B)
    '''
    s = s[1:-1]
    myTuple = tuple([int(number) for number in s.split(',')])
    return myTuple
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel')">Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Handle parsing what\'s loaded from CSV from string format to tuple')">Handle parsing what's loaded from CSV from string format to tuple</button>
			<div class='tooltip'>
				<div class='history-header'>Handle parsing what's loaded from CSV from string format to tuple</div>
				<pre class='code'><span style='background-color:yellow'>def string_to_tuple(s):</span>
<span style='background-color:yellow'>s = s[1:-1]</span>
<span style='background-color:yellow'>myTuple = tuple([int(number) for number in s.split(',')])</span>
<span style='background-color:yellow'>return myTuple</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def string_to_tuple(s):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>s : string in format "(a, b, c)" where a, b, and c are RGB values</span>
<span style='background-color:yellow'>RGB tuple in format (R, G, B)</span>
<span style='background-color:white'>s = s[1:-1]</span>
<span style='background-color:white'>myTuple = tuple([int(number) for number in s.split(',')])</span>
<span style='background-color:white'>return myTuple</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region15' line='def compare_image_distance(img1, img2):'>
		<pre class='code'>
def compare_image_distance(img1, img2):
    '''
    Parameters: 
        img1: PIL Image
        img2: PIL Image
    Returns:
        Mean Squared Error between the pixel values of the two images
    '''
    arr = np.array(img1)
    arr2 = np.array(img2)
    mse = ((arr-arr2)**2).mean().mean()
    return mse
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Calculate Mean Squared Error (MSE) between images to measure similarity')">Calculate Mean Squared Error (MSE) between images to measure similarity</button>
			<div class='tooltip'>
				<div class='history-header'>Calculate Mean Squared Error (MSE) between images to measure similarity</div>
				<pre class='code'><span style='background-color:yellow'>arr2 = np.array(img2)</span>
<span style='background-color:yellow'>mse = ((arr-arr2)**2).mean().mean()</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add function for compare_image_distance()')">Add function for compare_image_distance()</button>
			<div class='tooltip'>
				<div class='history-header'>Add function for compare_image_distance()</div>
				<pre class='code'><span style='background-color:yellow'>def compare_image_distance(img1, img2):</span>
<span style='background-color:yellow'>arr = np.array(img1)</span>
<span style='background-color:white'>arr2 = np.array(img2)</span>
<span style='background-color:white'>mse = ((arr-arr2)**2).mean().mean()</span>
<span style='background-color:yellow'>return mse</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def compare_image_distance(img1, img2):</span>
<span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>img1: PIL Image</span>
<span style='background-color:yellow'>img2: PIL Image</span>
<span style='background-color:yellow'>Mean Squared Error between the pixel values of the two images</span>
<span style='background-color:white'>arr = np.array(img1)</span>
<span style='background-color:white'>arr2 = np.array(img2)</span>
<span style='background-color:white'>mse = ((arr-arr2)**2).mean().mean()</span>
<span style='background-color:white'>return mse</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region16' line='def compare_image_to_images_distances(neighbor_image, window_imgs):'>
		<pre class='code'>
def compare_image_to_images_distances(neighbor_image, window_imgs):
    '''
    Vectorized comparison of an image to an array of images
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Vectorize: one images to many images similarity comparison')">Vectorize: one images to many images similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Vectorize: one images to many images similarity comparison</div>
				<pre class='code'><span style='background-color:yellow'>def compare_image_to_images_distances(neighbor_image, window_imgs):</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def compare_image_to_images_distances(neighbor_image, window_imgs):</span>
<span style='background-color:yellow'>Vectorized comparison of an image to an array of images</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region17' line='        neighbor_image: PIL Image'>
		<pre class='code'>
    Parameters:
        neighbor_image: PIL Image
        window_imgs: array of PIL Images
    Returns:
        array of MSE distances between neighbor_image and each image of window_imgs
    '''
    arr_img = np.array(neighbor_image)
    vector_arr = np.array([np.array(x) for x in window_imgs])
    MSEs = ((vector_arr - arr_img)**2).mean(axis=1).mean(axis=1).mean(axis=1)
    return MSEs
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Vectorize: one images to many images similarity comparison')">Vectorize: one images to many images similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Vectorize: one images to many images similarity comparison</div>
				<pre class='code'><span style='background-color:yellow'>arr_img = np.array(neighbor_image)</span>
<span style='background-color:yellow'>return MSEs</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Rework debugging steps into function')">Rework debugging steps into function</button>
			<div class='tooltip'>
				<div class='history-header'>Rework debugging steps into function</div>
				<pre class='code'><span style='background-color:white'>arr_img = np.array(neighbor_image)</span>
<span style='background-color:yellow'>vector_arr = np.array([np.array(x) for x in window_imgs])</span>
<span style='background-color:yellow'>MSEs = ((vector_arr - arr_img)**2).mean(axis=1).mean(axis=1).mean(axis=1)</span>
<span style='background-color:white'>return MSEs</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>neighbor_image: PIL Image</span>
<span style='background-color:yellow'>window_imgs: array of PIL Images</span>
<span style='background-color:yellow'>array of MSE distances between neighbor_image and each image of window_imgs</span>
<span style='background-color:white'>arr_img = np.array(neighbor_image)</span>
<span style='background-color:white'>vector_arr = np.array([np.array(x) for x in window_imgs])</span>
<span style='background-color:white'>MSEs = ((vector_arr - arr_img)**2).mean(axis=1).mean(axis=1).mean(axis=1)</span>
<span style='background-color:white'>return MSEs</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region18' line='def get_all_image_comparisons_matrix(file_image_map):'>
		<pre class='code'>
def get_all_image_comparisons_matrix(file_image_map):
    '''
    Generates a matrix of all Mean Squared Errors between every combination of PIL Images.
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:yellow'>def get_all_image_comparisons_matrix(file_image_map):</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>def get_all_image_comparisons_matrix(file_image_map):</span>
<span style='background-color:yellow'>Generates a matrix of all Mean Squared Errors between every combination of PIL Images.</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region19' line='        file_image_map : dictionary mapping filename to its respective PIL Image object'>
		<pre class='code'>
    Parameters:
        file_image_map : dictionary mapping filename to its respective PIL Image object
    Returns:
        file_index_map : dictionary mapping filename to its index location in the matrix (for quick lookups)
        all_distances : matrix of dimension (num_images X num_images) of all Mean Squared Errors
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>file_image_map : dictionary mapping filename to its respective PIL Image object</span>
<span style='background-color:yellow'>file_index_map : dictionary mapping filename to its index location in the matrix (for quick lookups)</span>
<span style='background-color:yellow'>all_distances : matrix of dimension (num_images X num_images) of all Mean Squared Errors</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region20' line='    file_index_map = {}'>
		<pre class='code'>
    '''
    file_index_map = {}
    index = 0
    all_distances = []
    for file in file_image_map.keys():
        file_distances = []
        img = file_image_map[file]
        file_index_map[file] = index
        index += 1
        for compare_file in file_image_map.keys():
            compare_image = file_image_map[compare_file]
            distance = compare_image_distance(img, compare_image)
            file_distances.append(distance)
        all_distances.append(file_distances)
    return file_index_map, all_distances
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Functionalize get_file_avgPixelMap() to make code neater')">Functionalize get_file_avgPixelMap() to make code neater</button>
			<div class='tooltip'>
				<div class='history-header'>Functionalize get_file_avgPixelMap() to make code neater</div>
				<pre class='code'><span style='background-color:yellow'>for file in file_image_map.keys():</span>
<span style='background-color:yellow'>img = file_image_map[file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:yellow'>file_index_map = {}</span>
<span style='background-color:yellow'>index = 0</span>
<span style='background-color:yellow'>all_distances = []</span>
<span style='background-color:white'>for file in file_image_map.keys():</span>
<span style='background-color:yellow'>file_distances = []</span>
<span style='background-color:white'>img = file_image_map[file]</span>
<span style='background-color:yellow'>file_index_map[file] = index</span>
<span style='background-color:yellow'>index += 1</span>
<span style='background-color:yellow'>for compare_file in file_image_map.keys():</span>
<span style='background-color:yellow'>compare_image = file_image_map[compare_file]</span>
<span style='background-color:yellow'>distance = compare_image_distance(img, compare_image)</span>
<span style='background-color:yellow'>file_distances.append(distance)</span>
<span style='background-color:yellow'>all_distances.append(file_distances)</span>
<span style='background-color:yellow'>return file_index_map, all_distances</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region21' line='def make_mosaic_kmeans(target_photo, photos_dir=Photos/, first_run = False):'>
		<pre class='code'>
def make_mosaic_kmeans(target_photo, photos_dir="Photos/", first_run = False):
    '''
    Generates a photo mosaic image of a target photo given a folder of images.
    This method uses kmeans clustering to extract the top 4 dominant colors of an image, and then
    map each pixel of the target image to an image in photos_dir that includes a high yield of a
    dominant color that is similar to that given pixel.
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>def make_mosaic_kmeans(target_photo, photos_dir="Photos/", first_run = False):</span>
<span style='background-color:yellow'>Generates a photo mosaic image of a target photo given a folder of images.</span>
<span style='background-color:yellow'>This method uses kmeans clustering to extract the top 4 dominant colors of an image, and then</span>
<span style='background-color:yellow'>map each pixel of the target image to an image in photos_dir that includes a high yield of a</span>
<span style='background-color:yellow'>dominant color that is similar to that given pixel.</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region22' line='    This approach was experimentally less succesful than the average pixel mapping algorithm, make_mosaic_avg'>
		<pre class='code'>
    This approach was experimentally less succesful than the average pixel mapping algorithm, "make_mosaic_avg"
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>This approach was experimentally less succesful than the average pixel mapping algorithm, "make_mosaic_avg"</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region23' line='        target_photo : filename of target photo (string)'>
		<pre class='code'>
    Parameters:
        target_photo : filename of target photo (string)
        photos_dir : name of folder of images (string)
        first_run : Boolean if this is the first time this method is being run
            This method includes a time-extensive method which should only be run once per photo_dir
    Returns:
        PIL Image of generated photo mosaic
    '''
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>Parameters:</span>
<span style='background-color:yellow'>target_photo : filename of target photo (string)</span>
<span style='background-color:yellow'>photos_dir : name of folder of images (string)</span>
<span style='background-color:yellow'>first_run : Boolean if this is the first time this method is being run</span>
<span style='background-color:yellow'>This method includes a time-extensive method which should only be run once per photo_dir</span>
<span style='background-color:yellow'>PIL Image of generated photo mosaic</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region24' line='    #get dictionary mapping each filename to its respective image'>
		<pre class='code'>
    #get dictionary mapping each filename to its respective image
    file_image_map = get_file_image_map(photos_dir)
    #only run kmeans clustering the first time you do this, so you can use the same set of photos for multiple target images without running this often
    if first_run:
        kmeans_dataframe = get_kmeans_dataframe_all_photos(file_image_map)
        kmeans_dataframe.to_csv("kmean_data_all_photos.csv",index=False)
    else:
        kmeans_dataframe = pd.read_csv("kmean_data_all_photos.csv")
        kmeans_dataframe["centroid"] = kmeans_dataframe["centroid"].map(string_to_tuple)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>file_image_map = get_file_image_map(photos_dir)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file')">Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</button>
			<div class='tooltip'>
				<div class='history-header'>Create pandas dataframe that includes pixels and their clusters for all images, and save to a csv file</div>
				<pre class='code'><span style='background-color:white'>file_image_map = get_file_image_map(photos_dir)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel')">Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel')">Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel</div>
				<pre class='code'><span style='background-color:white'>file_image_map = get_file_image_map(photos_dir)</span>
<span style='background-color:yellow'>if first_run:</span>
<span style='background-color:yellow'>kmeans_dataframe = get_kmeans_dataframe_all_photos(file_image_map)</span>
<span style='background-color:yellow'>kmeans_dataframe.to_csv("kmean_data_all_photos.csv",index=False)</span>
<span style='background-color:yellow'>kmeans_dataframe = pd.read_csv("kmean_data_all_photos.csv")</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Handle parsing what\'s loaded from CSV from string format to tuple')">Handle parsing what's loaded from CSV from string format to tuple</button>
			<div class='tooltip'>
				<div class='history-header'>Handle parsing what's loaded from CSV from string format to tuple</div>
				<pre class='code'><span style='background-color:white'>file_image_map = get_file_image_map(photos_dir)</span>
<span style='background-color:white'>if first_run:</span>
<span style='background-color:white'>kmeans_dataframe = get_kmeans_dataframe_all_photos(file_image_map)</span>
<span style='background-color:white'>kmeans_dataframe.to_csv("kmean_data_all_photos.csv",index=False)</span>
<span style='background-color:white'>kmeans_dataframe = pd.read_csv("kmean_data_all_photos.csv")</span>
<span style='background-color:yellow'>kmeans_dataframe["centroid"] = kmeans_dataframe["centroid"].map(string_to_tuple)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#get dictionary mapping each filename to its respective image</span>
<span style='background-color:white'>file_image_map = get_file_image_map(photos_dir)</span>
<span style='background-color:yellow'>#only run kmeans clustering the first time you do this, so you can use the same set of photos for multiple target images without running this often</span>
<span style='background-color:white'>if first_run:</span>
<span style='background-color:white'>kmeans_dataframe = get_kmeans_dataframe_all_photos(file_image_map)</span>
<span style='background-color:white'>kmeans_dataframe.to_csv("kmean_data_all_photos.csv",index=False)</span>
<span style='background-color:white'>kmeans_dataframe = pd.read_csv("kmean_data_all_photos.csv")</span>
<span style='background-color:white'>kmeans_dataframe["centroid"] = kmeans_dataframe["centroid"].map(string_to_tuple)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region25' line='    #get list of all centroids'>
		<pre class='code'>
    #get list of all centroids
    all_centroids = kmeans_dataframe['centroid'].tolist()
    #initialize KD Tree
    nearest_neighbors_tree = KDTree(all_centroids)
    #prep image
    img = Image.open(target_photo)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Switch to PIL (Python Image Library) and read in an image')">Switch to PIL (Python Image Library) and read in an image</button>
			<div class='tooltip'>
				<div class='history-header'>Switch to PIL (Python Image Library) and read in an image</div>
				<pre class='code'><span style='background-color:yellow'>img = Image.open(target_photo)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel')">Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel')">Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Load pandas kmeans dataframe from CSV and create mosaic using images with similar centroids as a given target_pixel</div>
				<pre class='code'><span style='background-color:yellow'>nearest_neighbors_tree = KDTree(all_centroids)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Handle parsing what\'s loaded from CSV from string format to tuple')">Handle parsing what's loaded from CSV from string format to tuple</button>
			<div class='tooltip'>
				<div class='history-header'>Handle parsing what's loaded from CSV from string format to tuple</div>
				<pre class='code'><span style='background-color:yellow'>all_centroids = kmeans_dataframe['centroid'].tolist()</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_centroids)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#get list of all centroids</span>
<span style='background-color:white'>all_centroids = kmeans_dataframe['centroid'].tolist()</span>
<span style='background-color:yellow'>#initialize KD Tree</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_centroids)</span>
<span style='background-color:yellow'>#prep image</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region26' line='    img = scale_image_to_basewidth(img, basewidth=50)'>
		<pre class='code'>
    img = scale_image_to_basewidth(img, basewidth=50)
    image_matrix = img.load()
    width, height = img.size
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Switch to PIL (Python Image Library) and read in an image')">Switch to PIL (Python Image Library) and read in an image</button>
			<div class='tooltip'>
				<div class='history-header'>Switch to PIL (Python Image Library) and read in an image</div>
				<pre class='code'><span style='background-color:yellow'>image_matrix = img.load()</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Resize image to 1X1 pixel to see \'average\' pixel')">Resize image to 1X1 pixel to see "average" pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Resize image to 1X1 pixel to see "average" pixel</div>
				<pre class='code'><span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:yellow'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>img = scale_image_to_basewidth(img, basewidth=50)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region27' line='    #loop through each pixel of the target image'>
		<pre class='code'>
    #loop through each pixel of the target image
    for y in range(height):
        for x in range(width):
            pixel = image_matrix[x,y]
            #find the 10 photos that have a dominant centroid most near the current pixel
            nearest_neighbors = nearest_neighbors_tree.query(pixel, k = 10)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Resize image to 1X1 pixel to see \'average\' pixel')">Resize image to 1X1 pixel to see "average" pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Resize image to 1X1 pixel to see "average" pixel</div>
				<pre class='code'><span style='background-color:yellow'>for y in range(height):</span>
<span style='background-color:yellow'>for x in range(width):</span>
<span style='background-color:yellow'>pixel = image_matrix[x,y]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add functions to concat images horizontally and vertically')">Add functions to concat images horizontally and vertically</button>
			<div class='tooltip'>
				<div class='history-header'>Add functions to concat images horizontally and vertically</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Functionalize get_file_avgPixelMap() to make code neater')">Functionalize get_file_avgPixelMap() to make code neater</button>
			<div class='tooltip'>
				<div class='history-header'>Functionalize get_file_avgPixelMap() to make code neater</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Now that something is working, investigate other ways of compiling mosaic to compare')">Now that something is working, investigate other ways of compiling mosaic to compare
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match ')">Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match </button>
			<div class='tooltip'>
				<div class='history-header'>Testing the impact of pulling a random picture from the top-10 matches, instead of using the top match </div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>nearest_neighbors = nearest_neighbors_tree.query(pixel, k = 10)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#loop through each pixel of the target image</span>
<span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>#find the 10 photos that have a dominant centroid most near the current pixel</span>
<span style='background-color:white'>nearest_neighbors = nearest_neighbors_tree.query(pixel, k = 10)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region28' line='            #generate subset of kmeans_dataframe that includes only the top-10 nearest neighbors'>
		<pre class='code'>
            #generate subset of kmeans_dataframe that includes only the top-10 nearest neighbors
            closest_files_dfs = []
            for i in range(10):    
                pixel_index = nearest_neighbors[1][i]#[random.randint(0, 9)]
                neighbor_pixel = all_centroids[pixel_index]
                closest_files = kmeans_dataframe[kmeans_dataframe['centroid'] == neighbor_pixel]#["filename"].values
                closest_files_dfs.append(closest_files)
            closest_files_df = pd.concat(closest_files_dfs)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel')">Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster')">Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster</button>
			<div class='tooltip'>
				<div class='history-header'>Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster</div>
				<pre class='code'><span style='background-color:yellow'>closest_files_dfs = []</span>
<span style='background-color:yellow'>for i in range(10):</span>
<span style='background-color:yellow'>pixel_index = nearest_neighbors[1][i]#[random.randint(0, 9)]</span>
<span style='background-color:yellow'>closest_files = kmeans_dataframe[kmeans_dataframe['centroid'] == neighbor_pixel]#["filename"].values</span>
<span style='background-color:yellow'>closest_files_dfs.append(closest_files)</span>
<span style='background-color:yellow'>closest_files_df = pd.concat(closest_files_dfs)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#generate subset of kmeans_dataframe that includes only the top-10 nearest neighbors</span>
<span style='background-color:white'>closest_files_dfs = []</span>
<span style='background-color:white'>for i in range(10):</span>
<span style='background-color:white'>pixel_index = nearest_neighbors[1][i]#[random.randint(0, 9)]</span>
<span style='background-color:white'>closest_files = kmeans_dataframe[kmeans_dataframe['centroid'] == neighbor_pixel]#["filename"].values</span>
<span style='background-color:white'>closest_files_dfs.append(closest_files)</span>
<span style='background-color:white'>closest_files_df = pd.concat(closest_files_dfs)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region29' line='            # pick a random image of the top 10 centroid matches'>
		<pre class='code'>
            # pick a random image of the top 10 centroid matches
            closest_file = closest_files_df.sort_values("percent",ascending=False)['filename'].values[random.randint(0, 9)]
            #gets the image given the filename
            closest_img = file_image_map[closest_file]
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Create mapping from filename to image object so images aren\'t read in more than once')">Create mapping from filename to image object so images aren't read in more than once</button>
			<div class='tooltip'>
				<div class='history-header'>Create mapping from filename to image object so images aren't read in more than once</div>
				<pre class='code'><span style='background-color:yellow'>closest_img = file_image_map[closest_file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel')">Use Kmeans clusters for each image to determine which images have clusters similar to a given pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster')">Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster</button>
			<div class='tooltip'>
				<div class='history-header'>Find the 10 images with a cluster centroid closest to a target_pixel, and then choose the one that has the largest amount in that cluster</div>
				<pre class='code'><span style='background-color:white'>closest_img = file_image_map[closest_file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load Two images for similarity comparison')">Load Two images for similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Load Two images for similarity comparison</div>
				<pre class='code'><span style='background-color:yellow'>closest_file = closest_files_df.sort_values("percent",ascending=False)['filename'].values[random.randint(0, 9)]</span>
<span style='background-color:white'>closest_img = file_image_map[closest_file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'># pick a random image of the top 10 centroid matches</span>
<span style='background-color:white'>closest_file = closest_files_df.sort_values("percent",ascending=False)['filename'].values[random.randint(0, 9)]</span>
<span style='background-color:yellow'>#gets the image given the filename</span>
<span style='background-color:white'>closest_img = file_image_map[closest_file]</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region30' line='            #add new image object running row image'>
		<pre class='code'>
            #add new image object running row image
            if x == 0:
                row_image = closest_img
            else:
                row_image = get_concat_h(row_image, closest_img)
        #add row image object to running column image
        if y == 0:
            column_image = row_image
        else:
            column_image = get_concat_v(column_image, row_image)
    #return stack of images as one
    return column_image
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Build mosaic by appending images for each pixel to a running image')">Build mosaic by appending images for each pixel to a running image</button>
			<div class='tooltip'>
				<div class='history-header'>Build mosaic by appending images for each pixel to a running image</div>
				<pre class='code'><span style='background-color:yellow'>if x == 0:</span>
<span style='background-color:yellow'>if y == 0:</span>
<span style='background-color:yellow'>column_image = row_image</span>
<span style='background-color:yellow'>column_image = get_concat_v(column_image, row_image)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load Two images for similarity comparison')">Load Two images for similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Load Two images for similarity comparison</div>
				<pre class='code'><span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:yellow'>return column_image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar')">Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</button>
			<div class='tooltip'>
				<div class='history-header'>Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</div>
				<pre class='code'><span style='background-color:white'>if x == 0:</span>
<span style='background-color:yellow'>row_image = closest_img</span>
<span style='background-color:yellow'>row_image = get_concat_h(row_image, closest_img)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#add new image object running row image</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>row_image = closest_img</span>
<span style='background-color:white'>row_image = get_concat_h(row_image, closest_img)</span>
<span style='background-color:yellow'>#add row image object to running column image</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:yellow'>#return stack of images as one</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region31' line='def make_mosaic_avg(target_photo, photos_dir=Photos/, basewidth=50, pixelWidth=50):'>
		<pre class='code'>
def make_mosaic_avg(target_photo, photos_dir="Photos/", basewidth=50, pixelWidth=50):
    '''
    This function takes in a target_photo filename, a photos_dir directory name, the basewidth of pixels for the target image to be reshaped to,
    and the pixelWidth, which is the width of each image replacing each pixel in the resized target image
    '''
    #maps filenames to PIL image objects
    file_image_map = get_file_image_map(photos_dir, width = pixelWidth)
    #maps filenames to the file's average pixel value
    file_avgPixel_map = get_file_avgPixelMap(file_image_map)
    #maps avg pixel values back to filenames
    pixel_files_map = get_pixel_files_map(file_avgPixel_map)
    #array of all average pixels. There should be one element per file.
    all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)
    #gets a matrix of all image similarity comparisons, as well as a mapping from filename to index in the matrix. 
    file_index_map, all_distances_matrix = get_all_image_comparisons_matrix(file_image_map)
    #initialize datatype for quick lookup of similar pixels
    nearest_neighbors_tree = KDTree(all_avg_pixels)
    #load and prep image
    img = Image.open(target_photo)
    img = scale_image_to_basewidth(img, basewidth=basewidth)
    image_matrix = img.load()
    width, height = img.size
    #initialize matrix to be used to check nearby appended images so as to not add a duplicate
    filename_matrix = []
    #basically window size in sliding window algorithm
    min_array_distance_between_similar_photos = 5
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Switch to PIL (Python Image Library) and read in an image')">Switch to PIL (Python Image Library) and read in an image</button>
			<div class='tooltip'>
				<div class='history-header'>Switch to PIL (Python Image Library) and read in an image</div>
				<pre class='code'><span style='background-color:yellow'>img = Image.open(target_photo)</span>
<span style='background-color:yellow'>image_matrix = img.load()</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Resize image to 1X1 pixel to see \'average\' pixel')">Resize image to 1X1 pixel to see "average" pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Resize image to 1X1 pixel to see "average" pixel</div>
				<pre class='code'><span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:yellow'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through photos in directory, calculate average pixel of each')">Loop through photos in directory, calculate average pixel of each</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through photos in directory, calculate average pixel of each</div>
				<pre class='code'><span style='background-color:white'>img = Image.open(target_photo)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through target_photo\'s pixels and find the avg_pixel closest, then map back to the filename')">Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through target_photo's pixels and find the avg_pixel closest, then map back to the filename</div>
				<pre class='code'><span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:yellow'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Functionalize get_file_avgPixelMap() to make code neater')">Functionalize get_file_avgPixelMap() to make code neater</button>
			<div class='tooltip'>
				<div class='history-header'>Functionalize get_file_avgPixelMap() to make code neater</div>
				<pre class='code'><span style='background-color:yellow'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:yellow'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:yellow'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load Two images for similarity comparison')">Load Two images for similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Load Two images for similarity comparison</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar')">Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</button>
			<div class='tooltip'>
				<div class='history-header'>Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:yellow'>filename_matrix = []</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add function for compare_image_distance()')">Add function for compare_image_distance()</button>
			<div class='tooltip'>
				<div class='history-header'>Add function for compare_image_distance()</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:white'>filename_matrix = []</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images')">Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</button>
			<div class='tooltip'>
				<div class='history-header'>Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:white'>filename_matrix = []</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Rework debugging steps into function')">Rework debugging steps into function</button>
			<div class='tooltip'>
				<div class='history-header'>Rework debugging steps into function</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:yellow'>img = scale_image_to_basewidth(img, basewidth=basewidth)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:white'>filename_matrix = []</span>
<span style='background-color:yellow'>min_array_distance_between_similar_photos = 5</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:yellow'>file_index_map, all_distances_matrix = get_all_image_comparisons_matrix(file_image_map)</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>img = scale_image_to_basewidth(img, basewidth=basewidth)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:white'>filename_matrix = []</span>
<span style='background-color:white'>min_array_distance_between_similar_photos = 5</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>def make_mosaic_avg(target_photo, photos_dir="Photos/", basewidth=50, pixelWidth=50):</span>
<span style='background-color:yellow'>This function takes in a target_photo filename, a photos_dir directory name, the basewidth of pixels for the target image to be reshaped to,</span>
<span style='background-color:yellow'>and the pixelWidth, which is the width of each image replacing each pixel in the resized target image</span>
<span style='background-color:yellow'>#maps filenames to PIL image objects</span>
<span style='background-color:yellow'>file_image_map = get_file_image_map(photos_dir, width = pixelWidth)</span>
<span style='background-color:yellow'>#maps filenames to the file's average pixel value</span>
<span style='background-color:white'>file_avgPixel_map = get_file_avgPixelMap(file_image_map)</span>
<span style='background-color:yellow'>#maps avg pixel values back to filenames</span>
<span style='background-color:white'>pixel_files_map = get_pixel_files_map(file_avgPixel_map)</span>
<span style='background-color:yellow'>#array of all average pixels. There should be one element per file.</span>
<span style='background-color:white'>all_avg_pixels = get_all_avg_pixels_array(file_avgPixel_map)</span>
<span style='background-color:yellow'>#gets a matrix of all image similarity comparisons, as well as a mapping from filename to index in the matrix.</span>
<span style='background-color:white'>file_index_map, all_distances_matrix = get_all_image_comparisons_matrix(file_image_map)</span>
<span style='background-color:yellow'>#initialize datatype for quick lookup of similar pixels</span>
<span style='background-color:white'>nearest_neighbors_tree = KDTree(all_avg_pixels)</span>
<span style='background-color:yellow'>#load and prep image</span>
<span style='background-color:white'>img = Image.open(target_photo)</span>
<span style='background-color:white'>img = scale_image_to_basewidth(img, basewidth=basewidth)</span>
<span style='background-color:white'>image_matrix = img.load()</span>
<span style='background-color:white'>width, height = img.size</span>
<span style='background-color:yellow'>#initialize matrix to be used to check nearby appended images so as to not add a duplicate</span>
<span style='background-color:white'>filename_matrix = []</span>
<span style='background-color:yellow'>#basically window size in sliding window algorithm</span>
<span style='background-color:white'>min_array_distance_between_similar_photos = 5</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region32' line='    for y in range(height):'>
		<pre class='code'>
    #loop through each pixel of the target image
    for y in range(height):
        filename_matrix.append([])
        for x in range(width):
            pixel = image_matrix[x,y]
            #select 200 nearest neighbors
            nearest_neighbors_indexes = nearest_neighbors_tree.query(pixel, k = 200)[1]
            #loop through sliding window of filenames appended nearby to ensure no similar images are near
            valid_image_found = False
            for pixel_index in nearest_neighbors_indexes:
                if not valid_image_found:
                    #search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break
                    neighbor_pixel = all_avg_pixels[pixel_index]
                    neighbor_file = pixel_files_map[neighbor_pixel][0]
                    neighbor_image = file_image_map[neighbor_file]
                    neighbor_distance_index = file_index_map[neighbor_file]
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Resize image to 1X1 pixel to see \'average\' pixel')">Resize image to 1X1 pixel to see "average" pixel</button>
			<div class='tooltip'>
				<div class='history-header'>Resize image to 1X1 pixel to see "average" pixel</div>
				<pre class='code'><span style='background-color:yellow'>for y in range(height):</span>
<span style='background-color:yellow'>for x in range(width):</span>
<span style='background-color:yellow'>pixel = image_matrix[x,y]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('For each pixel of target_photo, find photo with closest average pixel')">For each pixel of target_photo, find photo with closest average pixel
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Improve time it takes to loop through all images and find closest photo')">Improve time it takes to loop through all images and find closest photo
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add functions to concat images horizontally and vertically')">Add functions to concat images horizontally and vertically</button>
			<div class='tooltip'>
				<div class='history-header'>Add functions to concat images horizontally and vertically</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Clean up code by putting it into functions')">Clean up code by putting it into functions</button>
			<div class='tooltip'>
				<div class='history-header'>Clean up code by putting it into functions</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar')">Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</button>
			<div class='tooltip'>
				<div class='history-header'>Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:yellow'>filename_matrix.append([])</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>for pixel_index in nearest_neighbors_indexes:</span>
<span style='background-color:yellow'>#search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break</span>
<span style='background-color:white'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
<span style='background-color:yellow'>neighbor_file = pixel_files_map[neighbor_pixel][0]</span>
<span style='background-color:yellow'>neighbor_image = file_image_map[neighbor_file]</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Reworking this logic to stop looping through the closest file candidates once a valid image has been found')">Reworking this logic to stop looping through the closest file candidates once a valid image has been found</button>
			<div class='tooltip'>
				<div class='history-header'>Reworking this logic to stop looping through the closest file candidates once a valid image has been found</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>filename_matrix.append([])</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>valid_image_found = False</span>
<span style='background-color:white'>for pixel_index in nearest_neighbors_indexes:</span>
<span style='background-color:yellow'>if not valid_image_found:</span>
<span style='background-color:white'>#search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break</span>
<span style='background-color:white'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
<span style='background-color:white'>neighbor_file = pixel_files_map[neighbor_pixel][0]</span>
<span style='background-color:white'>neighbor_image = file_image_map[neighbor_file]</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images')">Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</button>
			<div class='tooltip'>
				<div class='history-header'>Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>filename_matrix.append([])</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:white'>valid_image_found = False</span>
<span style='background-color:white'>for pixel_index in nearest_neighbors_indexes:</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>#search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break</span>
<span style='background-color:white'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
<span style='background-color:white'>neighbor_file = pixel_files_map[neighbor_pixel][0]</span>
<span style='background-color:white'>neighbor_image = file_image_map[neighbor_file]</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>filename_matrix.append([])</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>nearest_neighbors_indexes = nearest_neighbors_tree.query(pixel, k = 200)[1]</span>
<span style='background-color:white'>valid_image_found = False</span>
<span style='background-color:white'>for pixel_index in nearest_neighbors_indexes:</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>#search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break</span>
<span style='background-color:white'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
<span style='background-color:white'>neighbor_file = pixel_files_map[neighbor_pixel][0]</span>
<span style='background-color:white'>neighbor_image = file_image_map[neighbor_file]</span>
<span style='background-color:yellow'>neighbor_distance_index = file_index_map[neighbor_file]</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>#loop through each pixel of the target image</span>
<span style='background-color:white'>for y in range(height):</span>
<span style='background-color:white'>filename_matrix.append([])</span>
<span style='background-color:white'>for x in range(width):</span>
<span style='background-color:white'>pixel = image_matrix[x,y]</span>
<span style='background-color:yellow'>#select 200 nearest neighbors</span>
<span style='background-color:white'>nearest_neighbors_indexes = nearest_neighbors_tree.query(pixel, k = 200)[1]</span>
<span style='background-color:yellow'>#loop through sliding window of filenames appended nearby to ensure no similar images are near</span>
<span style='background-color:white'>valid_image_found = False</span>
<span style='background-color:white'>for pixel_index in nearest_neighbors_indexes:</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>#search for a neighbor that fits the constraint of not being in the last min_distance rows or columns, then break</span>
<span style='background-color:white'>neighbor_pixel = all_avg_pixels[pixel_index]</span>
<span style='background-color:white'>neighbor_file = pixel_files_map[neighbor_pixel][0]</span>
<span style='background-color:white'>neighbor_image = file_image_map[neighbor_file]</span>
<span style='background-color:white'>neighbor_distance_index = file_index_map[neighbor_file]</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region33' line='                    window_x_min = max(0, x-min_array_distance_between_similar_photos)'>
		<pre class='code'>
                    window_x_min = max(0, x-min_array_distance_between_similar_photos)
                    window_y_min = max(0, y-min_array_distance_between_similar_photos)
                    window_x_max = min(width-1, x+min_array_distance_between_similar_photos)
                    if x == 0 and y == 0:
                       image_toAdd = neighbor_image
                       filename_toAdd = neighbor_file
                    else: 
                        image_toAdd = 4 #this is for debugging to ensure we don't accidentally recycle this variable in the loop
                        isValid = True #starts true, then gets disqualified potentially
                        window_imgs = []
                        for window_y in range(window_y_min, y+1):
                            if not valid_image_found:
                                for window_x in range(window_x_min, window_x_max + 1):
                                    if not valid_image_found:
                                        if not (window_y == y and window_x >= x):
                                            window_file = filename_matrix[window_y][window_x]
                                            window_file_index = file_index_map[window_file]
                                            image_distance = all_distances_matrix[neighbor_distance_index][window_file_index]
                                            #arbitrary threshold that has good experimental results
                                            if image_distance < 85:
                                                isValid = False
                        #if isValid is still true, then set flags to continue out of these loops
                        if isValid:
                            valid_image_found = True
                            image_toAdd = neighbor_image
                            filename_toAdd = neighbor_file
            #add image_toAdd to row
            if x == 0:
                row_image = image_toAdd
            else:
                row_image = get_concat_h(row_image, image_toAdd) 
            #add filename of appended image to filename_matrix
            filename_matrix[y].append(filename_toAdd)
        #append row of images to an image of all previous columns
        if y == 0:
            column_image = row_image
        else:
            column_image = get_concat_v(column_image, row_image)
    #return all columns of images of rows of images appended together
    return column_image
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Build mosaic by appending images for each pixel to a running image')">Build mosaic by appending images for each pixel to a running image</button>
			<div class='tooltip'>
				<div class='history-header'>Build mosaic by appending images for each pixel to a running image</div>
				<pre class='code'><span style='background-color:yellow'>if x == 0:</span>
<span style='background-color:yellow'>if y == 0:</span>
<span style='background-color:yellow'>column_image = row_image</span>
<span style='background-color:yellow'>column_image = get_concat_v(column_image, row_image)</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Load Two images for similarity comparison')">Load Two images for similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Load Two images for similarity comparison</div>
				<pre class='code'><span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:yellow'>return column_image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar')">Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</button>
			<div class='tooltip'>
				<div class='history-header'>Before adding an image to the mosaic, looping through nearby appended files to check if they are too similar</div>
				<pre class='code'><span style='background-color:yellow'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:yellow'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:yellow'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Reworking this logic to stop looping through the closest file candidates once a valid image has been found')">Reworking this logic to stop looping through the closest file candidates once a valid image has been found</button>
			<div class='tooltip'>
				<div class='history-header'>Reworking this logic to stop looping through the closest file candidates once a valid image has been found</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:yellow'>if x == 0 and y == 0:</span>
<span style='background-color:yellow'>image_toAdd = neighbor_image</span>
<span style='background-color:yellow'>if not valid_image_found:</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:yellow'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add function for compare_image_distance()')">Add function for compare_image_distance()</button>
			<div class='tooltip'>
				<div class='history-header'>Add function for compare_image_distance()</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:yellow'>filename_toAdd = neighbor_file</span>
<span style='background-color:yellow'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:yellow'>if image_distance < 85:</span>
<span style='background-color:yellow'>isValid = False</span>
<span style='background-color:yellow'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:yellow'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images')">Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</button>
			<div class='tooltip'>
				<div class='history-header'>Test sliding window sizes, and how for larger sliding window sizes, we need to bring in more candidate images</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:yellow'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:yellow'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:yellow'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:yellow'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>if image_distance < 85:</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Vectorize: one images to many images similarity comparison')">Vectorize: one images to many images similarity comparison</button>
			<div class='tooltip'>
				<div class='history-header'>Vectorize: one images to many images similarity comparison</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:yellow'>window_imgs = []</span>
<span style='background-color:white'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Rework debugging steps into function')">Rework debugging steps into function</button>
			<div class='tooltip'>
				<div class='history-header'>Rework debugging steps into function</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:white'>window_imgs = []</span>
<span style='background-color:white'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>if image_distance < 85:</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:yellow'>image_toAdd = 4 #this is for debugging to ensure we don't accidentally recycle this variable in the loop</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:white'>window_imgs = []</span>
<span style='background-color:white'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:yellow'>window_file_index = file_index_map[window_file]</span>
<span style='background-color:yellow'>image_distance = all_distances_matrix[neighbor_distance_index][window_file_index]</span>
<span style='background-color:white'>if image_distance < 85:</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>image_toAdd = 4 #this is for debugging to ensure we don't accidentally recycle this variable in the loop</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:white'>window_imgs = []</span>
<span style='background-color:white'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>window_file_index = file_index_map[window_file]</span>
<span style='background-color:white'>image_distance = all_distances_matrix[neighbor_distance_index][window_file_index]</span>
<span style='background-color:white'>if image_distance < 85:</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:yellow'>#if isValid is still true, then set flags to continue out of these loops</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:yellow'>#add image_toAdd to row</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:yellow'>row_image = image_toAdd</span>
<span style='background-color:yellow'>row_image = get_concat_h(row_image, image_toAdd)</span>
<span style='background-color:yellow'>#add filename of appended image to filename_matrix</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:yellow'>#append row of images to an image of all previous columns</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:yellow'>#return all columns of images of rows of images appended together</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>window_x_min = max(0, x-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_y_min = max(0, y-min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>window_x_max = min(width-1, x+min_array_distance_between_similar_photos)</span>
<span style='background-color:white'>if x == 0 and y == 0:</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>image_toAdd = 4 #this is for debugging to ensure we don't accidentally recycle this variable in the loop</span>
<span style='background-color:white'>isValid = True #starts true, then gets disqualified potentially</span>
<span style='background-color:white'>window_imgs = []</span>
<span style='background-color:white'>for window_y in range(window_y_min, y+1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>for window_x in range(window_x_min, window_x_max + 1):</span>
<span style='background-color:white'>if not valid_image_found:</span>
<span style='background-color:white'>if not (window_y == y and window_x >= x):</span>
<span style='background-color:white'>window_file = filename_matrix[window_y][window_x]</span>
<span style='background-color:white'>window_file_index = file_index_map[window_file]</span>
<span style='background-color:white'>image_distance = all_distances_matrix[neighbor_distance_index][window_file_index]</span>
<span style='background-color:yellow'>#arbitrary threshold that has good experimental results</span>
<span style='background-color:white'>if image_distance < 85:</span>
<span style='background-color:white'>isValid = False</span>
<span style='background-color:white'>#if isValid is still true, then set flags to continue out of these loops</span>
<span style='background-color:white'>if isValid:</span>
<span style='background-color:white'>valid_image_found = True</span>
<span style='background-color:white'>image_toAdd = neighbor_image</span>
<span style='background-color:white'>filename_toAdd = neighbor_file</span>
<span style='background-color:white'>#add image_toAdd to row</span>
<span style='background-color:white'>if x == 0:</span>
<span style='background-color:white'>row_image = image_toAdd</span>
<span style='background-color:white'>row_image = get_concat_h(row_image, image_toAdd)</span>
<span style='background-color:white'>#add filename of appended image to filename_matrix</span>
<span style='background-color:white'>filename_matrix[y].append(filename_toAdd)</span>
<span style='background-color:white'>#append row of images to an image of all previous columns</span>
<span style='background-color:white'>if y == 0:</span>
<span style='background-color:white'>column_image = row_image</span>
<span style='background-color:white'>column_image = get_concat_v(column_image, row_image)</span>
<span style='background-color:white'>#return all columns of images of rows of images appended together</span>
<span style='background-color:white'>return column_image</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region34' line='basewidth = 60'>
		<pre class='code'>
basewidth = 60
printer_dpi = 12000
printer_inches = 24
printer_pixels = printer_dpi * printer_inches
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Read in an example image using Python')">Read in an example image using Python
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:yellow'>basewidth = 60</span>
<span style='background-color:yellow'>printer_dpi = 12000</span>
<span style='background-color:yellow'>printer_inches = 24</span>
<span style='background-color:yellow'>printer_pixels = printer_dpi * printer_inches</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region35' line='pixels_per_row = basewidth'>
		<pre class='code'>
pixels_per_row = basewidth
pixelWidth = printer_pixels // pixels_per_row
print(pixelWidth)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Calculate average pixel of image')">Calculate average pixel of image
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans to cluster pixels in an image into groups of colors')">Use Kmeans to cluster pixels in an image into groups of colors
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Find the percent of an image\'s pixels that falls into a given cluster')">Find the percent of an image's pixels that falls into a given cluster
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:yellow'>pixels_per_row = basewidth</span>
<span style='background-color:yellow'>pixelWidth = printer_pixels // pixels_per_row</span>
<span style='background-color:yellow'>print(pixelWidth)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region36' line='target_photo = angie_flower.jpeg'>
		<pre class='code'>
target_photo = "angie_flower.jpeg"
photos_dir = "Photos/"
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Get average pixel for each JPG file in folder')">Get average pixel for each JPG file in folder
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Loop through photos in directory, calculate average pixel of each')">Loop through photos in directory, calculate average pixel of each</button>
			<div class='tooltip'>
				<div class='history-header'>Loop through photos in directory, calculate average pixel of each</div>
				<pre class='code'><span style='background-color:yellow'>photos_dir = "Photos/"</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Use Kmeans to cluster pixels in an image into groups of colors')">Use Kmeans to cluster pixels in an image into groups of colors
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each')">Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</button>
			<div class='tooltip'>
				<div class='history-header'>Cluster pixels of a given image, and print out centroid colors, and what percent of image falls into each</div>
				<pre class='code'><span style='background-color:yellow'>target_photo = "angie_flower.jpeg"</span>
<span style='background-color:white'>photos_dir = "Photos/"</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Testing running code with different parameters for image similarity threshold and number of neighbors retreived')">Testing running code with different parameters for image similarity threshold and number of neighbors retreived</button>
			<div class='tooltip'>
				<div class='history-header'>Testing running code with different parameters for image similarity threshold and number of neighbors retreived</div>
				<pre class='code'><span style='background-color:white'>photos_dir = "Photos/"</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:white'>target_photo = "angie_flower.jpeg"</span>
<span style='background-color:white'>photos_dir = "Photos/"</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region37' line='for width in [25, 50, 100, 4800]:'>
		<pre class='code'>
for width in [25, 50, 100, 4800]:
    height = width
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:yellow'>for width in [25, 50, 100, 4800]:</span>
<span style='background-color:yellow'>height = width</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region38' line='    img = Image.open(angie_bed1.jpg)'>
		<pre class='code'>
    img = Image.open("angie_bed1.jpg")
    img.draft("RGB",(width,height))
    img = img.resize((width, height), Image.Resampling.LANCZOS)
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Calculate Mean Squared Error (MSE) between images to measure similarity')">Calculate Mean Squared Error (MSE) between images to measure similarity</button>
			<div class='tooltip'>
				<div class='history-header'>Calculate Mean Squared Error (MSE) between images to measure similarity</div>
				<pre class='code'><span style='background-color:yellow'>img = Image.open("angie_bed1.jpg")</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Add comments to functions')">Add comments to functions</button>
			<div class='tooltip'>
				<div class='history-header'>Add comments to functions</div>
				<pre class='code'><span style='background-color:yellow'>img.draft("RGB",(width,height))</span>
</pre>
</div>
		</div>
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>img = Image.open("angie_bed1.jpg")</span>
<span style='background-color:white'>img.draft("RGB",(width,height))</span>
<span style='background-color:yellow'>img = img.resize((width, height), Image.Resampling.LANCZOS)</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region39' line='    img2 = Image.open(angie_bed2.jpg)'>
		<pre class='code'>
    img2 = Image.open("angie_bed2.jpg")
    img2.draft("RGB",(width,height))
    img2 = img2.resize((width, height), Image.Resampling.LANCZOS)
    print(width, compare_image_distance(img, img2))
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Calculate Mean Squared Error (MSE) between images to measure similarity')">Calculate Mean Squared Error (MSE) between images to measure similarity</button>
			<div class='tooltip'>
				<div class='history-header'>Calculate Mean Squared Error (MSE) between images to measure similarity</div>
				<pre class='code'><span style='background-color:yellow'>img2 = Image.open("angie_bed2.jpg")</span>
</pre>
</div>
		</div>
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:white'>img2 = Image.open("angie_bed2.jpg")</span>
<span style='background-color:yellow'>img2.draft("RGB",(width,height))</span>
<span style='background-color:yellow'>img2 = img2.resize((width, height), Image.Resampling.LANCZOS)</span>
<span style='background-color:yellow'>print(width, compare_image_distance(img, img2))</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


<div class='horizContainer'>
	<div class='leftContainer' id='region40' line='img = make_mosaic_avg(target_photo, photos_dir, basewidth=basewidth, pixelWidth=pixelWidth)'>
		<pre class='code'>
exit()
img = make_mosaic_avg(target_photo, photos_dir, basewidth=basewidth, pixelWidth=pixelWidth)
img.save("mosaic_huge.jpg")
		</pre>
	</div>
	<div class='rightContainer'>
<div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Generating the first version of the mosaic and organize code')">Generating the first version of the mosaic and organize code
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Detect if two images are duplicates or near-identical')">Detect if two images are duplicates or near-identical
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Make sure that duplicate or similar-looking photos aren\'t adjacent in mosaic')">Make sure that duplicate or similar-looking photos aren't adjacent in mosaic
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Runtime improvements')">Runtime improvements
</div><div class='files-container'>main.py </div>
	<div class='subgoal-group' onmouseover="hoverEnterSubgoal(this)" onmouseout="hoverLeaveSubgoal(this)"  onclick="openSubgoal('Testing and Cleaning Code -- final touches')">Testing and Cleaning Code -- final touches
		<div class='tooltip-container'>
			<button type='button' class='history active tooltip-trigger' onmouseover="logUserAction('code', 'hover activity: Test how resizing photos impacts calculated MSE averages')">Test how resizing photos impacts calculated MSE averages</button>
			<div class='tooltip'>
				<div class='history-header'>Test how resizing photos impacts calculated MSE averages</div>
				<pre class='code'><span style='background-color:yellow'>img = make_mosaic_avg(target_photo, photos_dir, basewidth=basewidth, pixelWidth=pixelWidth)</span>
<span style='background-color:yellow'>img.save("mosaic_huge.jpg")</span>
</pre>
</div>
		</div>
</div>	</div>
</div>


